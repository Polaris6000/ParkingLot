<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REST API í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        h1 {
            color: #333;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }
        
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .section h2 {
            color: #007bff;
            margin-top: 0;
        }
        
        .api-group {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
        }
        
        .method-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
        }
        
        .method-get {
            background-color: #28a745;
            color: white;
        }
        
        .method-post {
            background-color: #007bff;
            color: white;
        }
        
        .method-delete {
            background-color: #dc3545;
            color: white;
        }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        button.delete {
            background-color: #dc3545;
        }
        
        button.delete:hover {
            background-color: #c82333;
        }
        
        input[type="number"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100px;
            margin: 0 10px;
        }
        
        #response {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .success {
            color: #28a745;
            font-weight: bold;
        }
        
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        
        .code-block {
            background: #f4f4f4;
            border-left: 3px solid #007bff;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸš— REST API í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>
    
    <!-- GET ìš”ì²­ ì„¹ì…˜ -->
    <div class="section">
        <h2>ğŸ“Š GET - ì¡°íšŒ (Read)</h2>
        
        <div class="api-group">
            <span class="method-badge method-get">GET</span>
            <strong>/api/test/data/statistics</strong>
            <p>í˜„ì¬ ì£¼ì°¨ì¥ í†µê³„ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.</p>
            <button onclick="getStatistics()">í†µê³„ ì¡°íšŒ</button>
        </div>
        
        <div class="code-block">
ì˜ˆì‹œ JavaScript ì½”ë“œ:
fetch('/api/test/data/statistics')
  .then(response => response.json())
  .then(data => console.log(data));
        </div>
    </div>
    
    <!-- POST ìš”ì²­ ì„¹ì…˜ -->
    <div class="section">
        <h2>â• POST - ìƒì„± (Create)</h2>
        
        <div class="api-group">
            <span class="method-badge method-post">POST</span>
            <strong>/api/test/data/entry?count=N</strong>
            <p>ì…ì°¨ ë°ì´í„°ë¥¼ ëŒ€ëŸ‰ ìƒì„±í•©ë‹ˆë‹¤.</p>
            <input type="number" id="entryCount" value="5" min="1" max="20">
            <button onclick="bulkEntry()">ì…ì°¨ ìƒì„±</button>
        </div>
        
        <div class="api-group">
            <span class="method-badge method-post">POST</span>
            <strong>/api/test/data/exit?count=N</strong>
            <p>ì¶œì°¨ ë°ì´í„°ë¥¼ ëŒ€ëŸ‰ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
            <input type="number" id="exitCount" value="3" min="1" max="20">
            <button onclick="bulkExit()">ì¶œì°¨ ì²˜ë¦¬</button>
        </div>
        
        <div class="api-group">
            <span class="method-badge method-post">POST</span>
            <strong>/api/test/data/monthly?count=N</strong>
            <p>ì›”ì •ì•¡ íšŒì›ì„ ëŒ€ëŸ‰ ë“±ë¡í•©ë‹ˆë‹¤.</p>
            <input type="number" id="monthlyCount" value="5" min="1" max="20">
            <button onclick="bulkMonthly()">íšŒì› ë“±ë¡</button>
        </div>
        
        <div class="api-group">
            <span class="method-badge method-post">POST</span>
            <strong>/api/test/data/fee-policy?count=N</strong>
            <p>ìš”ê¸ˆ ì •ì±…ì„ ëŒ€ëŸ‰ ë“±ë¡í•©ë‹ˆë‹¤.</p>
            <input type="number" id="policyCount" value="3" min="1" max="10">
            <button onclick="bulkFeePolicy()">ì •ì±… ë“±ë¡</button>
        </div>
        
        <div class="code-block">
ì˜ˆì‹œ JavaScript ì½”ë“œ:
fetch('/api/test/data/entry?count=5', {
  method: 'POST'
})
  .then(response => response.json())
  .then(data => console.log(data));
        </div>
    </div>
    
    <!-- DELETE ìš”ì²­ ì„¹ì…˜ -->
    <div class="section">
        <h2>ğŸ—‘ï¸ DELETE - ì‚­ì œ (Delete)</h2>
        
        <div class="api-group">
            <span class="method-badge method-delete">DELETE</span>
            <strong>/api/test/data/monthly?count=N</strong>
            <p>ì›”ì •ì•¡ íšŒì›ì„ ëœë¤ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.</p>
            <input type="number" id="deleteMonthlyCount" value="2" min="1" max="10">
            <button class="delete" onclick="deleteMonthly()">íšŒì› ì‚­ì œ</button>
        </div>
        
        <div class="api-group">
            <span class="method-badge method-delete">DELETE</span>
            <strong>/api/test/data/fee-policy?count=N</strong>
            <p>ìš”ê¸ˆ ì •ì±…ì„ ëœë¤ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.</p>
            <input type="number" id="deletePolicyCount" value="1" min="1" max="5">
            <button class="delete" onclick="deleteFeePolicy()">ì •ì±… ì‚­ì œ</button>
        </div>
        
        <div class="api-group">
            <span class="method-badge method-delete">DELETE</span>
            <strong>/api/test/data/all</strong>
            <p>ì „ì²´ ì£¼ì°¨ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</p>
            <button class="delete" onclick="clearAll()">ì „ì²´ ì‚­ì œ</button>
        </div>
        
        <div class="code-block">
ì˜ˆì‹œ JavaScript ì½”ë“œ:
fetch('/api/test/data/monthly?count=2', {
  method: 'DELETE'
})
  .then(response => response.json())
  .then(data => console.log(data));
        </div>
    </div>
    
    <!-- ì‘ë‹µ ì¶œë ¥ ì„¹ì…˜ -->
    <div class="section">
        <h2>ğŸ“‹ API ì‘ë‹µ</h2>
        <div id="response">ì—¬ê¸°ì— API ì‘ë‹µì´ í‘œì‹œë©ë‹ˆë‹¤...</div>
    </div>

    <script>
        /**
         * REST API í˜¸ì¶œì„ ìœ„í•œ ê³µí†µ í•¨ìˆ˜
         * 
         * @param {string} url - API ì—”ë“œí¬ì¸íŠ¸ URL
         * @param {string} method - HTTP ë©”ì„œë“œ (GET, POST, DELETE ë“±)
         * @param {string} description - ì‘ì—… ì„¤ëª… (ë¡œê·¸ìš©)
         */
        async function callAPI(url, method, description) {
            const responseDiv = document.getElementById('response');
            responseDiv.innerHTML = `â³ ${description} ìš”ì²­ ì¤‘...\n\nìš”ì²­ URL: ${url}\në©”ì„œë“œ: ${method}`;
            
            try {
                // fetch APIë¥¼ ì‚¬ìš©í•œ REST í˜¸ì¶œ
                // fetchëŠ” Promise ê¸°ë°˜ì˜ HTTP í´ë¼ì´ì–¸íŠ¸
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'  // JSON ìš”ì²­ì„ì„ ëª…ì‹œ
                    }
                });
                
                // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
                const data = await response.json();
                
                // HTTP ìƒíƒœ ì½”ë“œ í™•ì¸
                if (response.ok) {  // 200~299 ë²”ìœ„
                    // ì„±ê³µ ì‘ë‹µ
                    responseDiv.innerHTML = 
                        `<span class="success">âœ… ${description} ì„±ê³µ!</span>\n\n` +
                        `HTTP ìƒíƒœ: ${response.status} ${response.statusText}\n\n` +
                        `ì‘ë‹µ ë°ì´í„°:\n${JSON.stringify(data, null, 2)}`;
                } else {
                    // ì—ëŸ¬ ì‘ë‹µ (400, 404, 500 ë“±)
                    responseDiv.innerHTML = 
                        `<span class="error">âŒ ${description} ì‹¤íŒ¨</span>\n\n` +
                        `HTTP ìƒíƒœ: ${response.status} ${response.statusText}\n\n` +
                        `ì—ëŸ¬ ë©”ì‹œì§€:\n${JSON.stringify(data, null, 2)}`;
                }
                
            } catch (error) {
                // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë“±
                responseDiv.innerHTML = 
                    `<span class="error">âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</span>\n\n` +
                    `${error.message}`;
            }
        }
        
        // ==================== GET ìš”ì²­ í•¨ìˆ˜ë“¤ ====================
        
        function getStatistics() {
            callAPI('/api/test/data/statistics', 'GET', 'í†µê³„ ì¡°íšŒ');
        }
        
        // ==================== POST ìš”ì²­ í•¨ìˆ˜ë“¤ ====================
        
        function bulkEntry() {
            const count = document.getElementById('entryCount').value;
            callAPI(`/api/test/data/entry?count=${count}`, 'POST', `${count}ëŒ€ ì…ì°¨ ìƒì„±`);
        }
        
        function bulkExit() {
            const count = document.getElementById('exitCount').value;
            callAPI(`/api/test/data/exit?count=${count}`, 'POST', `${count}ëŒ€ ì¶œì°¨ ì²˜ë¦¬`);
        }
        
        function bulkMonthly() {
            const count = document.getElementById('monthlyCount').value;
            callAPI(`/api/test/data/monthly?count=${count}`, 'POST', `${count}ëª… íšŒì› ë“±ë¡`);
        }
        
        function bulkFeePolicy() {
            const count = document.getElementById('policyCount').value;
            callAPI(`/api/test/data/fee-policy?count=${count}`, 'POST', `${count}ê±´ ì •ì±… ë“±ë¡`);
        }
        
        // ==================== DELETE ìš”ì²­ í•¨ìˆ˜ë“¤ ====================
        
        function deleteMonthly() {
            if (confirm('ì •ë§ ì›”ì •ì•¡ íšŒì›ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const count = document.getElementById('deleteMonthlyCount').value;
                callAPI(`/api/test/data/monthly?count=${count}`, 'DELETE', `${count}ëª… íšŒì› ì‚­ì œ`);
            }
        }
        
        function deleteFeePolicy() {
            if (confirm('ì •ë§ ìš”ê¸ˆ ì •ì±…ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const count = document.getElementById('deletePolicyCount').value;
                callAPI(`/api/test/data/fee-policy?count=${count}`, 'DELETE', `${count}ê±´ ì •ì±… ì‚­ì œ`);
            }
        }
        
        function clearAll() {
            if (confirm('âš ï¸ ê²½ê³ : ì „ì²´ ì£¼ì°¨ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                callAPI('/api/test/data/all', 'DELETE', 'ì „ì²´ ë°ì´í„° ì‚­ì œ');
            }
        }
    </script>
</body>
</html>
